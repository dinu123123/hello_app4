<!DOCTYPE html>
<html>
<head>
<style>
table {
    font-family: arial, sans-serif;
    border-collapse: collapse;
    width: 80%;
}

td, th {
    border: 1px solid #aaaaaa;
    text-align: left;
    padding: 1px;
}

tr:nth-child(even) {
    background-color: #dddddd;
}
</style>
</head>
<body>

<p id="notice"><%= notice %></p>
<h1>Invoiced Trips</h1>
<h4>This page is dedicated to Invoiced Trips description - you can see the existent list of invoiced trips modify them or introduce new ones.</h4>
<ul>
 
  <li>
  <p>
  <h4> Download All Invoiced Trips as CSV or Excel file:
  <%= link_to "CSV", invoiced_trips_path(format: "csv") %> |
  <%= link_to "Excel", invoiced_trips_path(format: "xls") %> 
  </h4> 
  </p>
  </li>


  <li>
  <div>
  <h4> Import Invoiced Trips from CSV file: </h4>
    <%= form_tag import_invoiced_trips_path, multipart: true do %>
    <%= file_field_tag :file %>
    <%= submit_tag  "Import CSV"%>
  <% end %>
  </div>
  </li>

  <li>
  <p>
  <h4> Create <%= link_to 'New Invoiced Trip ',new_invoiced_trip_path %> </h4> 
  </p>
  </li>

</ul>

<table>
  <thead>
    <tr>
      <th>InvoiceID</th>
      <th>Client Name</th>
      <th>Client ID</th>
      <th>Driver Name</th>
      <th>Driver CNP </th>
      <th>Driver ID</th>
      <th>Truck</th>
       <th>Truck ID</th>
      <th>Germany toll</th>
      <th>Belgium toll</th>
      <th>Swiss toll</th>
      <th>France toll</th>
      <th>Italy toll</th>
      <th>Uk toll</th>
      <th>Netherlands toll</th>
      <th>Km</th>
      <th>Km EvoGPS</th>
      <th>Km Driver's Route Note</th>
      <th>Trip Start DateTime</th>
      <th>Trip End DateTime</th>
      <th>Invoice Date</th>
      <th>Total amount</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @invoiced_trips.each do |invoiced_trip| %>
      <tr>
        <td><%= invoiced_trip.invoice_id %></td>
        <td><%= @clients.find(invoiced_trip.client_id).Name %></td>
        <td><%= invoiced_trip.client_id %></td>
        <td><%= @drivers.find(invoiced_trip.DRIVER_id).FIRSTNAME+" "+ @drivers.find(invoiced_trip.DRIVER_id).SECONDNAME %></td>
        <td><%= @drivers.find(invoiced_trip.DRIVER_id).CNP %></td>
        <td><%= invoiced_trip.DRIVER_id %></td>
        <td><%= @trucks.find(invoiced_trip.truck_id).NB_PLATE %></td>
        <td><%= invoiced_trip.truck_id %></td>
        <td><%= invoiced_trip.germany_toll %></td>
        <td><%= invoiced_trip.belgium_toll %></td>
        <td><%= invoiced_trip.swiss_toll %></td>
        <td><%= invoiced_trip.france_toll %></td>
        <td><%= invoiced_trip.italy_toll %></td>
        <td><%= invoiced_trip.uk_toll %></td>
        <td><%= invoiced_trip.netherlands_toll %></td>
        <td><%= invoiced_trip.km %></td>
        <td><%= invoiced_trip.km_evogps %></td>
        <td><%= invoiced_trip.km_driver_route_note %></td>
        <td><%= invoiced_trip.StartDate.strftime("%d %B %Y %H:%M") %></td>
        <td><%= invoiced_trip.EndDate.strftime("%d %B %Y %H:%M") %></td>
        <td><%= invoiced_trip.date %></td>
        <td><%= invoiced_trip.total_amount %></td>
        <td><%= link_to 'Show', invoiced_trip %></td>
        <td><%= link_to 'Edit', edit_invoiced_trip_path(invoiced_trip) %></td>
        <td><%= link_to 'Destroy', invoiced_trip, method: :delete, data: { confirm: 'Are you sure?' } %></td>
      </tr>
    <% end %>
  </tbody>
</table>

<br>

<%= link_to 'New Invoiced Trip', new_invoiced_trip_path %>
